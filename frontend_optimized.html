<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traduceri AI - Traducere Profesională în 2 Minute</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 60px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 20px;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 1s ease-out;
        }

        .hero p {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
            animation: fadeInUp 1s ease-out 0.2s both;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            animation: fadeInUp 1s ease-out 0.4s both;
        }

        .stat {
            text-align: center;
            color: white;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Main Upload Section */
        .upload-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .upload-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #2563eb, #059669, #dc2626);
            border-radius: 20px 20px 0 0;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 10px;
            text-align: center;
        }

        .section-subtitle {
            color: #6b7280;
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        /* Drag & Drop Zone */
        .drop-zone {
            border: 3px dashed #d1d5db;
            border-radius: 15px;
            padding: 60px 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            position: relative;
            overflow: hidden;
        }

        .drop-zone:hover {
            border-color: #2563eb;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.1);
        }

        .drop-zone.dragover {
            border-color: #059669;
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            transform: scale(1.02);
        }

        .drop-zone-icon {
            font-size: 4rem;
            color: #6b7280;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .drop-zone:hover .drop-zone-icon {
            color: #2563eb;
            transform: scale(1.1);
        }

        .drop-zone-text {
            font-size: 1.2rem;
            color: #374151;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .drop-zone-subtext {
            color: #6b7280;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .file-input {
            display: none;
        }

        .upload-btn {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.4);
        }

        /* Progress Bar */
        .progress-container {
            display: none;
            margin-top: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #059669 0%, #10b981 100%);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
            animation: shimmer 2s infinite;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
            color: #059669;
        }

        /* Cost Display */
        .cost-display {
            display: none;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            text-align: center;
        }

        .cost-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .cost-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .cost-label {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 5px;
        }

        .cost-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: #1f2937;
        }

        .total-cost {
            font-size: 2rem;
            font-weight: 700;
            color: #0ea5e9;
            margin-bottom: 15px;
        }

        /* Preview Section */
        .preview-section {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e5e7eb;
        }

        .preview-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
        }

        .preview-watermark {
            background: #fee2e2;
            color: #dc2626;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .preview-content {
            background: #f9fafb;
            border-radius: 10px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
            color: #374151;
            border-left: 4px solid #fbbf24;
        }

        /* Payment Section */
        .payment-section {
            display: none;
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
            border-radius: 20px;
            padding: 40px;
            margin-top: 30px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(5, 150, 105, 0.3);
        }

        .payment-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .payment-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .payment-btn {
            background: white;
            color: #059669;
            padding: 20px 50px;
            border: none;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            margin: 0 10px;
        }

        .payment-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
        }

        .security-badges {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .security-badge {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 0.9rem;
        }

        .security-badge i {
            margin-right: 8px;
            font-size: 1.1rem;
        }

        /* Trust Signals */
        .trust-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-top: 40px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        }

        .trust-title {
            font-size: 2rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 30px;
        }

        .trust-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .trust-item {
            padding: 20px;
            border-radius: 15px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            transition: all 0.3s ease;
        }

        .trust-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .trust-icon {
            font-size: 3rem;
            color: #2563eb;
            margin-bottom: 15px;
        }

        .trust-item h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 10px;
        }

        .trust-item p {
            color: #6b7280;
            line-height: 1.5;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .hero-stats {
                flex-direction: column;
                gap: 20px;
            }

            .container {
                padding: 10px;
            }

            .upload-section {
                padding: 20px;
            }

            .drop-zone {
                padding: 40px 15px;
            }

            .cost-breakdown {
                grid-template-columns: 1fr;
            }

            .payment-btn {
                display: block;
                margin: 10px 0;
                width: 100%;
            }

            .trust-items {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .processing {
            animation: pulse 2s infinite;
        }

        /* Loading States */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.4) 50%, transparent 100%);
            animation: shimmer 1.5s infinite;
        }

        /* Status Messages */
        .status-message {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: 500;
            text-align: center;
            display: none;
        }

        .status-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }

        .status-error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }

        .status-info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #93c5fd;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Hero Section -->
        <div class="hero">
            <h1><i class="fas fa-language"></i> Traduceri AI</h1>
            <p>Traducere profesională în 2 minute. Fără așteptare, fără compromisuri.</p>
            <div class="hero-stats">
                <div class="stat">
                    <span class="stat-number">2 min</span>
                    <span class="stat-label">Timp mediu</span>
                </div>
                <div class="stat">
                    <span class="stat-number">99.9%</span>
                    <span class="stat-label">Acuratețe</span>
                </div>
                <div class="stat">
                    <span class="stat-number">24/7</span>
                    <span class="stat-label">Disponibil</span>
                </div>
            </div>
        </div>

        <!-- Main Upload Section -->
        <div class="upload-section">
            <h2 class="section-title">Încarcă Documentul</h2>
            <p class="section-subtitle">Suportăm PDF, DOCX, XLSX, TXT și ODT până la 50MB</p>

            <!-- Drag & Drop Zone -->
            <div class="drop-zone" id="dropZone">
                <i class="fas fa-cloud-upload-alt drop-zone-icon"></i>
                <div class="drop-zone-text">Trage și plasează fișierul aici</div>
                <div class="drop-zone-subtext">sau</div>
                <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                    <i class="fas fa-folder-open"></i> Selectează Fișier
                </button>
                <input type="file" id="fileInput" class="file-input" accept=".pdf,.docx,.xlsx,.txt,.odt">
            </div>

            <!-- Progress Bar -->
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Se încarcă...</div>
            </div>

            <!-- Status Messages -->
            <div class="status-message" id="statusMessage"></div>

            <!-- Cost Display -->
            <div class="cost-display" id="costDisplay">
                <h3>Calculul Costului</h3>
                <div class="cost-breakdown">
                    <div class="cost-item">
                        <div class="cost-label">Cuvinte detectate</div>
                        <div class="cost-value" id="wordCount">-</div>
                    </div>
                    <div class="cost-item">
                        <div class="cost-label">Limba sursă</div>
                        <div class="cost-value" id="sourceLang">-</div>
                    </div>
                    <div class="cost-item">
                        <div class="cost-label">Limba țintă</div>
                        <div class="cost-value" id="targetLang">-</div>
                    </div>
                    <div class="cost-item">
                        <div class="cost-label">Cost + TVA</div>
                        <div class="cost-value" id="costWithVAT">-</div>
                    </div>
                </div>
                <div class="total-cost" id="totalCost">0 RON</div>
                <p>Previzualizare gratuită disponibilă mai jos</p>
            </div>
        </div>

        <!-- Language Selection -->
        <div class="upload-section" style="display: none;" id="languageSection">
            <h2 class="section-title">Selectează Limbile</h2>
            <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 20px; align-items: center; margin: 30px 0;">
                <div>
                    <label for="sourceLanguage" style="display: block; margin-bottom: 10px; font-weight: 600;">Din limba:</label>
                    <select id="sourceLanguage" style="width: 100%; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 1.1rem;">
                        <option value="auto">Detectare automată</option>
                        <option value="ro">Română</option>
                        <option value="en">Engleză</option>
                        <option value="fr">Franceză</option>
                        <option value="de">Germană</option>
                        <option value="es">Spaniolă</option>
                        <option value="it">Italiană</option>
                    </select>
                </div>
                <div style="text-align: center;">
                    <i class="fas fa-arrow-right" style="font-size: 2rem; color: #6b7280;"></i>
                </div>
                <div>
                    <label for="targetLanguage" style="display: block; margin-bottom: 10px; font-weight: 600;">În limba:</label>
                    <select id="targetLanguage" style="width: 100%; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 1.1rem;">
                        <option value="ro">Română</option>
                        <option value="en">Engleză</option>
                        <option value="fr">Franceză</option>
                        <option value="de">Germană</option>
                        <option value="es">Spaniolă</option>
                        <option value="it">Italiană</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Preview Section -->
        <div class="preview-section" id="previewSection">
            <div class="preview-header">
                <h3 class="preview-title">Previzualizare Gratuită</h3>
                <span class="preview-watermark">DEMO - 200 cuvinte</span>
            </div>
            <div class="preview-content" id="previewContent">
                Previzualizarea va apărea aici după încărcarea fișierului...
            </div>
        </div>

        <!-- Payment Section -->
        <div class="payment-section" id="paymentSection">
            <i class="fas fa-lock" style="font-size: 3rem; margin-bottom: 20px;"></i>
            <h3 class="payment-title">Plătește Securizat</h3>
            <p class="payment-subtitle">Pentru a primi traducerea completă și factura oficială</p>
            
            <div style="margin: 30px 0;">
                <button class="payment-btn" id="stripePayBtn">
                    <i class="fab fa-stripe"></i> Plată cu Card
                </button>
                <button class="payment-btn" id="btPayBtn">
                    <i class="fas fa-credit-card"></i> BT Pay
                </button>
            </div>

            <div class="security-badges">
                <div class="security-badge">
                    <i class="fas fa-shield-alt"></i>
                    SSL Securizat
                </div>
                <div class="security-badge">
                    <i class="fas fa-lock"></i>
                    PCI Compliant
                </div>
                <div class="security-badge">
                    <i class="fas fa-undo"></i>
                    Garanție 100%
                </div>
            </div>
        </div>

        <!-- Trust Section -->
        <div class="trust-section">
            <h2 class="trust-title">De ce să alegi Traduceri AI?</h2>
            <div class="trust-items">
                <div class="trust-item">
                    <i class="fas fa-bolt trust-icon"></i>
                    <h3>Rapiditate Extremă</h3>
                    <p>Traduceri profesionale în maximum 2 minute. Fără așteptare, fără întârzieri.</p>
                </div>
                <div class="trust-item">
                    <i class="fas fa-brain trust-icon"></i>
                    <h3>AI Avansat</h3>
                    <p>Folosim DeepL Pro, cea mai avansată tehnologie de traducere cu AI din lume.</p>
                </div>
                <div class="trust-item">
                    <i class="fas fa-shield-alt trust-icon"></i>
                    <h3>100% Securizat</h3>
                    <p>Documentele tale sunt protejate și șterse automat după livrare. GDPR compliant.</p>
                </div>
                <div class="trust-item">
                    <i class="fas fa-receipt trust-icon"></i>
                    <h3>Facturi Oficiale</h3>
                    <p>Primești factură oficială pentru fiecare traducere prin sistemul FGO.</p>
                </div>
                <div class="trust-item">
                    <i class="fas fa-mobile-alt trust-icon"></i>
                    <h3>Mobile Friendly</h3>
                    <p>Funcționează perfect pe orice dispozitiv - telefon, tabletă sau computer.</p>
                </div>
                <div class="trust-item">
                    <i class="fas fa-headset trust-icon"></i>
                    <h3>Suport 24/7</h3>
                    <p>Echipa noastră este disponibilă oricând pentru a te ajuta cu orice întrebare.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentFile = null;
        let costData = null;
        let previewData = null;

        // DOM elements
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const progressContainer = document.getElementById('progressContainer');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const statusMessage = document.getElementById('statusMessage');
        const costDisplay = document.getElementById('costDisplay');
        const languageSection = document.getElementById('languageSection');
        const previewSection = document.getElementById('previewSection');
        const paymentSection = document.getElementById('paymentSection');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            console.log('Traduceri AI Frontend initialized');
        });

        function initializeEventListeners() {
            // File input change
            fileInput.addEventListener('change', handleFileSelect);

            // Drag and drop events
            dropZone.addEventListener('dragover', handleDragOver);
            dropZone.addEventListener('dragleave', handleDragLeave);
            dropZone.addEventListener('drop', handleFileDrop);

            // Language selection change
            document.getElementById('sourceLanguage').addEventListener('change', recalculateCost);
            document.getElementById('targetLanguage').addEventListener('change', recalculateCost);

            // Payment buttons
            document.getElementById('stripePayBtn').addEventListener('click', () => initiatePayment('stripe'));
            document.getElementById('btPayBtn').addEventListener('click', () => initiatePayment('btpay'));
        }

        function handleDragOver(e) {
            e.preventDefault();
            dropZone.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            dropZone.classList.remove('dragover');
        }

        function handleFileDrop(e) {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                processFile(files[0]);
            }
        }

        function handleFileSelect(e) {
            const files = e.target.files;
            if (files.length > 0) {
                processFile(files[0]);
            }
        }

        async function processFile(file) {
            // Validate file
            if (!validateFile(file)) return;

            currentFile = file;
            showProgress();
            
            try {
                // Upload and analyze file
                await uploadFile(file);
                
                // Show language selection
                languageSection.style.display = 'block';
                
                // Calculate cost
                await calculateCost();
                
                // Generate preview
                await generatePreview();
                
                showStatus('Fișier procesat cu succes!', 'success');
                
            } catch (error) {
                console.error('Error processing file:', error);
                showStatus('Eroare la procesarea fișierului. Te rugăm încearcă din nou.', 'error');
            } finally {
                hideProgress();
            }
        }

        function validateFile(file) {
            const maxSize = 50 * 1024 * 1024; // 50MB
            const allowedTypes = [
                'application/pdf',
                'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
                'text/plain',
                'application/vnd.oasis.opendocument.text'
            ];

            if (file.size > maxSize) {
                showStatus('Fișierul este prea mare. Dimensiunea maximă este 50MB.', 'error');
                return false;
            }

            if (!allowedTypes.includes(file.type)) {
                showStatus('Tip de fișier nesuportat. Folosește PDF, DOCX, XLSX, TXT sau ODT.', 'error');
                return false;
            }

            return true;
        }

        async function uploadFile(file) {
            const formData = new FormData();
            formData.append('file', file);

            // Simulate upload progress
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 90) progress = 90;
                updateProgress(progress, 'Se încarcă fișierul...');
            }, 200);

            try {
                const response = await fetch('http://localhost:5000/api/upload', {
                    method: 'POST',
                    body: formData
                });

                clearInterval(progressInterval);
                updateProgress(100, 'Fișier încărcat!');

                if (!response.ok) {
                    throw new Error('Upload failed');
                }

                return await response.json();
            } catch (error) {
                clearInterval(progressInterval);
                throw error;
            }
        }

        async function calculateCost() {
            if (!currentFile) return;

            updateProgress(50, 'Se calculează costul...');

            try {
                const formData = new FormData();
                formData.append('file', currentFile);
                formData.append('source_lang', document.getElementById('sourceLanguage').value);
                formData.append('target_lang', document.getElementById('targetLanguage').value);

                const response = await fetch('http://localhost:5000/api/calculate-cost', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    throw new Error('Cost calculation failed');
                }

                costData = await response.json();
                displayCost(costData);

            } catch (error) {
                console.error('Error calculating cost:', error);
                // Show demo cost for development
                costData = {
                    word_count: 1250,
                    source_lang: 'en',
                    target_lang: 'ro',
                    cost_before_vat: 75.0,
                    vat_amount: 14.25,
                    total_cost: 89.25
                };
                displayCost(costData);
            }
        }

        async function generatePreview() {
            if (!currentFile) return;

            updateProgress(75, 'Se generează previzualizarea...');

            try {
                const formData = new FormData();
                formData.append('file', currentFile);
                formData.append('source_lang', document.getElementById('sourceLanguage').value);
                formData.append('target_lang', document.getElementById('targetLanguage').value);

                const response = await fetch('http://localhost:5000/api/generate-preview', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    throw new Error('Preview generation failed');
                }

                previewData = await response.json();
                displayPreview(previewData);

            } catch (error) {
                console.error('Error generating preview:', error);
                // Show demo preview for development
                previewData = {
                    preview_text: 'Acesta este un text de previzualizare demonstrativă pentru sistemul de traduceri AI. Textul original va fi tradus profesional folosind tehnologia DeepL Pro. Această previzualizare conține primele 200 de cuvinte din documentul dvs. Pentru a primi traducerea completă, vă rugăm să efectuați plata. Sistemul nostru garantează acuratețe de 99.9% și livrare în maximum 2 minute...',
                    word_count: 200,
                    estimated_total: 1250
                };
                displayPreview(previewData);
            }
        }

        function displayCost(data) {
            document.getElementById('wordCount').textContent = data.word_count.toLocaleString();
            document.getElementById('sourceLang').textContent = getLanguageName(data.source_lang);
            document.getElementById('targetLang').textContent = getLanguageName(data.target_lang);
            document.getElementById('costWithVAT').textContent = `${data.cost_before_vat.toFixed(2)} + ${data.vat_amount.toFixed(2)} RON`;
            document.getElementById('totalCost').textContent = `${data.total_cost.toFixed(2)} RON`;
            
            costDisplay.style.display = 'block';
        }

        function displayPreview(data) {
            document.getElementById('previewContent').textContent = data.preview_text;
            previewSection.style.display = 'block';
            paymentSection.style.display = 'block';
            
            // Scroll to preview
            previewSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        async function initiatePayment(method) {
            if (!costData) {
                showStatus('Te rugăm să încarci mai întâi un fișier.', 'error');
                return;
            }

            showStatus('Se inițializează plata...', 'info');

            try {
                const response = await fetch('http://localhost:5000/api/create-payment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        amount: costData.total_cost,
                        currency: 'RON',
                        method: method,
                        file_info: {
                            name: currentFile.name,
                            size: currentFile.size,
                            word_count: costData.word_count
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error('Payment initialization failed');
                }

                const paymentData = await response.json();
                
                if (method === 'stripe') {
                    // Redirect to Stripe Checkout
                    window.location.href = paymentData.checkout_url;
                } else {
                    // Handle BT Pay
                    handleBTPayment(paymentData);
                }

            } catch (error) {
                console.error('Error initiating payment:', error);
                showStatus('Eroare la inițializarea plății. Te rugăm încearcă din nou.', 'error');
            }
        }

        function handleBTPayment(paymentData) {
            // Simulate BT Pay integration
            showStatus('Redirecting to BT Pay...', 'info');
            setTimeout(() => {
                alert('BT Pay integration - demo mode');
            }, 1000);
        }

        function recalculateCost() {
            if (currentFile) {
                calculateCost();
            }
        }

        function showProgress() {
            progressContainer.style.display = 'block';
            updateProgress(0, 'Se inițializează...');
        }

        function hideProgress() {
            setTimeout(() => {
                progressContainer.style.display = 'none';
            }, 1000);
        }

        function updateProgress(percentage, text) {
            progressFill.style.width = percentage + '%';
            progressText.textContent = text + ` (${Math.round(percentage)}%)`;
        }

        function showStatus(message, type) {
            statusMessage.textContent = message;
            statusMessage.className = `status-message status-${type}`;
            statusMessage.style.display = 'block';
            
            setTimeout(() => {
                statusMessage.style.display = 'none';
            }, 5000);
        }

        function getLanguageName(code) {
            const languages = {
                'auto': 'Detectare automată',
                'ro': 'Română',
                'en': 'Engleză',
                'fr': 'Franceză',
                'de': 'Germană',
                'es': 'Spaniolă',
                'it': 'Italiană'
            };
            return languages[code] || code.toUpperCase();
        }

        // Add some interactive effects
        document.querySelectorAll('.trust-item').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-8px) scale(1.02)';
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });

        // Add loading animation to buttons
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('click', function() {
                if (!this.classList.contains('loading')) {
                    this.classList.add('loading');
                    setTimeout(() => {
                        this.classList.remove('loading');
                    }, 2000);
                }
            });
        });
    </script>
</body>
</html>